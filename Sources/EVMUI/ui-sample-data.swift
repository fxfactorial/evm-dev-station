import DevStationCommon
import SwiftUI
import SwiftData

public let EMPTY_ADDR = "0x0000000000000000000000000000000000000000"

let sample_contract = LoadedContract(
    name: "local-compiled",
    bytecode: "6080604052600a5f55600c600155348015610018575f80fd5b506104c9806100265f395ff3fe608060405234801561000f575f80fd5b5060043610610060575f3560e01c806305ce74f81461006457806362dbc99f1461006e5780638e206d001461009e578063d288a24c146100a8578063da06b49c146100d8578063f4bd3338146100f8575b5f80fd5b61006c610128565b005b610088600480360381019061008391906102cd565b61016e565b6040516100959190610310565b60405180910390f35b6100a66101c2565b005b6100c260048036038101906100bd9190610353565b6101c4565b6040516100cf9190610310565b60405180910390f35b6100e06101de565b6040516100ef9392919061037e565b60405180910390f35b610112600480360381019061010d91906103b3565b610207565b60405161011f9190610310565b60405180910390f35b6002600a1161016c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101639061044b565b60405180910390fd5b565b5f607b60025f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055505f607b90506101c8915050919050565b565b5f805f54905082816101d69190610496565b915050919050565b5f805f805f5490505f600154905080826101f89190610496565b82829450945094505050909192565b5f808390505f607b8461021a9190610496565b90505f8054905061023581836102309190610496565b610249565b9150815f8190555081935050505092915050565b5f80600a836102589190610496565b9050600a816102679190610496565b915050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61029c82610273565b9050919050565b6102ac81610292565b81146102b6575f80fd5b50565b5f813590506102c7816102a3565b92915050565b5f602082840312156102e2576102e161026f565b5b5f6102ef848285016102b9565b91505092915050565b5f819050919050565b61030a816102f8565b82525050565b5f6020820190506103235f830184610301565b92915050565b610332816102f8565b811461033c575f80fd5b50565b5f8135905061034d81610329565b92915050565b5f602082840312156103685761036761026f565b5b5f6103758482850161033f565b91505092915050565b5f6060820190506103915f830186610301565b61039e6020830185610301565b6103ab6040830184610301565b949350505050565b5f80604083850312156103c9576103c861026f565b5b5f6103d6858286016102b9565b92505060206103e78582860161033f565b9150509250929050565b5f82825260208201905092915050565b7f6f6f6f70730000000000000000000000000000000000000000000000000000005f82015250565b5f6104356005836103f1565b915061044082610401565b602082019050919050565b5f6020820190508181035f83015261046281610429565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6104a0826102f8565b91506104ab836102f8565b92508282019050808211156104c3576104c2610469565b5b9291505056",
    address: "",
    load_kind: .DirectFromUser,
    contract: try? EthereumContract(sample_contract_abi),
    is_loaded_against_state: false
//    state_overrides: [StateChange(nice_name: "balance",
//                                  key: "",
//                                  original_value: "0x00",
//                                  new_value: "")]
    )
    

    
let sample_contract_abi = """
[
  {
    "inputs": [],
    "name": "check_require",
    "outputs": [],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "do_work_no_parameters",
    "outputs": [
      { "internalType": "uint256", "name": "", "type": "uint256" },
      { "internalType": "uint256", "name": "", "type": "uint256" },
      { "internalType": "uint256", "name": "", "type": "uint256" }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      { "internalType": "address", "name": "sender", "type": "address" },
      { "internalType": "uint256", "name": "amount", "type": "uint256" }
    ],
    "name": "entry_point",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "more_Deploy",
    "outputs": [],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [{ "internalType": "address", "name": "has", "type": "address" }],
    "name": "simple_handler",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      { "internalType": "uint256", "name": "input_amount", "type": "uint256" }
    ],
    "name": "storage_checking",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
"""
